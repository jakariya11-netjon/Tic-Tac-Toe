<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic Tac Toe â€” Easy AI</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0f172a; /* Dark Blue Background */
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .game-box {
            background: #1e293b; /* Slate Card Color */
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            width: 320px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        }

        .board {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(3, 90px);
            gap: 10px;
            justify-content: center;
        }

        .cell {
            width: 90px;
            height: 90px;
            background: #334155;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5em;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
            overflow: hidden;
            user-select: none;
        }

        .cell:hover {
            background: #475569;
            transform: translateY(-2px);
        }

        .btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background: #0ea5e9;
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
        }

        .btn:hover {
            background: #0284c7;
        }

        /* Winner Animation */
        .winner {
            animation: glowScale 0.7s ease forwards;
            box-shadow: 0 0 20px #ff4500;
            background-color: #64748b; /* Lighter highlight */
        }

        @keyframes glowScale {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px #ff7700; }
            100% { transform: scale(1.05); box-shadow: 0 0 25px #ff3300; }
        }
    </style>
</head>

<body>
    <div class="game-box">
        <h2>Tic Tac Toe (Easy Mode)</h2>
        <div id="status">Turn: <span id="turn">X</span></div>

        <div class="board" id="board">
            <div class="cell" onclick="handleClick(0)"></div>
            <div class="cell" onclick="handleClick(1)"></div>
            <div class="cell" onclick="handleClick(2)"></div>
            <div class="cell" onclick="handleClick(3)"></div>
            <div class="cell" onclick="handleClick(4)"></div>
            <div class="cell" onclick="handleClick(5)"></div>
            <div class="cell" onclick="handleClick(6)"></div>
            <div class="cell" onclick="handleClick(7)"></div>
            <div class="cell" onclick="handleClick(8)"></div>
        </div>

        <button id="reset" class="btn" onclick="resetGame()">Restart Game</button>
    </div>

    <audio id="tapSound" src="pop-402322.mp3"></audio>
    <audio id="winSound" src="loud-fanfare-trumpet-effect-05-412046.mp3"></audio>
    <audio id="tieSound" src="tie.mp3"></audio>
    <audio id="loseSound" src="loss.mp3"></audio>

    <script>
        const statusBox = document.getElementById("status");
        let turnText = document.getElementById("turn");
        
        // We select the boxes we just created in HTML
        const uiCells = document.getElementsByClassName("cell");

        const tapSound = document.getElementById("tapSound");
        const winSound = document.getElementById("winSound");
        const tieSound = document.getElementById("tieSound");
        const loseSound = document.getElementById("loseSound");

        let gameActive = true;
        let currentPlayer = "X"; // Human is always X
        let boardState = ["", "", "", "", "", "", "", "", ""]; // Tracks the data
        let autoResetTimer = null;

        // 1. Handle Human Click
        function handleClick(index) {
            // Check if game active, cell empty, AND it is Human's turn
            if (!gameActive || boardState[index] !== "" || currentPlayer !== "X") return;

            // Human Move
            makeMove(index, "X");

            // If game still active, Computer Move after delay
            if (gameActive) {
                setTimeout(computerMoveEasy, 500); 
            }
        }

        // 2. Apply Move (Used by both Human and Computer)
        function makeMove(index, player) {
            boardState[index] = player;
            uiCells[index].innerText = player; // Update the HTML
            
            safePlay(tapSound);

            // Check Win
            const winPattern = checkWin(player);
            if (winPattern) {
                endGame(winPattern, player);
                return;
            }

            // Check Tie
            if (!boardState.includes("")) {
                statusBox.innerText = "It's a Tie!";
                gameActive = false;
                safePlay(tieSound);
                scheduleAutoReset();
                return;
            }

            // Switch internal turn tracker
            currentPlayer = (player === "X") ? "O" : "X";
            if (turnText) turnText.innerText = currentPlayer;
        }

        // 3. Easy AI (Random + Center Preference)
        function computerMoveEasy() {
            if (!gameActive) return;

            // Find all empty spots
            let emptyIndices = [];
            boardState.forEach((val, idx) => {
                if (val === "") emptyIndices.push(idx);
            });

            if (emptyIndices.length === 0) return;

            let pick;
            // Simple Logic: Prefer center (index 4) if available, else random
            if (boardState[4] === "") {
                pick = 4;
            } else {
                pick = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
            }

            makeMove(pick, "O");
        }

        // 4. Win Checking Logic
        function checkWin(player) {
            const winConditions = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
                [0, 4, 8], [2, 4, 6]             // Diagonals
            ];
            for (let condition of winConditions) {
                const [a, b, c] = condition;
                if (boardState[a] === player && boardState[b] === player && boardState[c] === player) {
                    return condition;
                }
            }
            return null;
        }

        // 5. Game Over / Win Effects
        function endGame(pattern, winner) {
            if (autoResetTimer) clearTimeout(autoResetTimer);
            
            gameActive = false;
            statusBox.innerText = (winner === "X") ? "You Win!" : "Computer Wins!";
            
            if(winner === "X") safePlay(winSound);
            else safePlay(loseSound);

            // Highlight winning cells
            pattern.forEach(index => {
                uiCells[index].classList.add("winner");
            });

            scheduleAutoReset();
        }

        function resetGame() {
            if (autoResetTimer) clearTimeout(autoResetTimer);
            
            boardState = ["", "", "", "", "", "", "", "", ""];
            gameActive = true;
            currentPlayer = "X";
            statusBox.innerHTML = "Turn: <span id='turn'>X</span>";
            turnText = document.getElementById("turn");

            // Clear UI
            for(let i=0; i<uiCells.length; i++) {
                uiCells[i].innerText = "";
                uiCells[i].classList.remove("winner");
            }
        }

        function scheduleAutoReset() {
            autoResetTimer = setTimeout(resetGame, 3000);
        }

        // Helper to prevent crash if sound files are missing
        function safePlay(audio) {
            if (!audio) return;
            try {
                audio.currentTime = 0;
                audio.play().catch(() => {});
            } catch (e) { }
        }
    </script>
</body>
</html>
